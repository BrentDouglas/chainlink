<?xml version="1.0" encoding="UTF-8"?>
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>all</id>
    <formats>
        <format>zip</format>
        <format>tar.gz</format>
    </formats>

    <includeBaseDirectory>true</includeBaseDirectory>
    <baseDirectory>chainlink-${project.version}</baseDirectory>

    <dependencySets>
        <dependencySet>
            <includes>
                <include>io.machinecode.chainlink:chainlink-api</include>
                <include>io.machinecode.chainlink:chainlink-core</include>
                <include>io.machinecode.chainlink:chainlink-ee-glassfish</include>
                <include>io.machinecode.chainlink:chainlink-ee-tomee</include>
                <include>io.machinecode.chainlink:chainlink-ee-wildfly</include>
                <include>io.machinecode.chainlink:chainlink-inject-cdi</include>
                <include>io.machinecode.chainlink:chainlink-inject-guice</include>
                <include>io.machinecode.chainlink:chainlink-inject-jndi</include>
                <include>io.machinecode.chainlink:chainlink-inject-seam</include>
                <include>io.machinecode.chainlink:chainlink-inject-spring</include>
                <include>io.machinecode.chainlink:chainlink-jsl-groovy</include>
                <include>io.machinecode.chainlink:chainlink-marshalling-jboss</include>
                <include>io.machinecode.chainlink:chainlink-repository-coherence</include>
                <include>io.machinecode.chainlink:chainlink-repository-ehcache</include>
                <include>io.machinecode.chainlink:chainlink-repository-gridgain</include>
                <include>io.machinecode.chainlink:chainlink-repository-hazelcast</include>
                <include>io.machinecode.chainlink:chainlink-repository-infinispan</include>
                <include>io.machinecode.chainlink:chainlink-repository-jdbc</include>
                <include>io.machinecode.chainlink:chainlink-repository-jpa</include>
                <include>io.machinecode.chainlink:chainlink-repository-mongo</include>
                <include>io.machinecode.chainlink:chainlink-repository-redis</include>
                <include>io.machinecode.chainlink:chainlink-se</include>
                <include>io.machinecode.chainlink:chainlink-server-chainlinkd</include>
                <include>io.machinecode.chainlink:chainlink-spi</include>
                <include>io.machinecode.chainlink:chainlink-transport-coherence</include>
                <include>io.machinecode.chainlink:chainlink-transport-gridgain</include>
                <include>io.machinecode.chainlink:chainlink-transport-hazelcast</include>
                <include>io.machinecode.chainlink:chainlink-transport-infinispan</include>
                <include>io.machinecode.chainlink:chainlink-transport-jgroups</include>

                <include>com.google.inject:guice</include>
                <include>com.h2database:h2</include>
                <include>com.hazelcast:hazelcast</include>
                <!-- <include>com.oracle.coherence:coherence</include> -->
                <include>gnu.getopt:java-getopt</include>
                <include>io.machinecode.then:then-api</include>
                <include>io.machinecode.then:then-core</include>
                <include>javax.enterprise:cdi-api</include>
                <include>javax.inject:javax.inject</include>
                <include>javax.servlet:servlet-api</include>
                <include>log4j:log4j</include>
                <include>net.sf.ehcache:ehcache-core</include>
                <include>net.sf.trove4j:trove4j</include>
                <include>org.apache.derby:derby</include>
                <include>org.codehaus.groovy:groovy-all</include>
                <include>org.gridgain:gridgain-core</include>
                <include>org.gridgain:gridgain-indexing</include>
                <include>org.hibernate:hibernate-core</include>
                <include>org.hibernate:hibernate-entitymanager</include>
                <include>org.hibernate.javax.persistence:hibernate-jpa-2.0-api</include>
                <include>org.infinispan:infinispan-commons</include>
                <include>org.infinispan:infinispan-core</include>
                <include>org.jboss.logging:jboss-logging</include>
                <include>org.jboss.marshalling:jboss-marshalling</include>
                <include>org.jboss.marshalling:jboss-marshalling-river</include>
                <include>org.jboss.seam:jboss-seam:ejb</include>
                <include>org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec</include>
                <include>org.jboss.weld.se:weld-se</include>
                <include>org.jgroups:jgroups</include>
                <include>org.jongo:jongo</include>
                <include>org.mariadb.jdbc:mariadb-java-client</include>
                <include>org.mongodb:mongo-java-driver</include>
                <include>org.springframework:spring-beans</include>
                <include>org.springframework:spring-context</include>
                <include>org.springframework:spring-core</include>
                <include>org.postgresql:postgresql</include>
                <include>redis.clients:jedis</include>
            </includes>
            <outputDirectory>repository</outputDirectory>
        </dependencySet>
    </dependencySets>

    <fileSets>
        <fileSet>
            <outputDirectory>modules</outputDirectory>
            <directory>../ee/wildfly/modules</directory>
            <directoryMode>755</directoryMode>
            <fileMode>644</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <outputDirectory>doc</outputDirectory>
            <directory>../doc/target/generated-docs</directory>
            <directoryMode>644</directoryMode>
            <fileMode>644</fileMode>
            <excludes>
                <exclude>*.pdf</exclude>
                <exclude>*.pdfmarks</exclude>
            </excludes>
        </fileSet>
    </fileSets>

    <files>
        <file>
            <source>../doc/target/generated-docs/chainlink.pdf</source>
            <outputDirectory>doc</outputDirectory>
        </file>
        <file>
            <source>../README.md</source>
            <outputDirectory>/</outputDirectory>
        </file>
        <file>
            <source>../LICENSE.txt</source>
            <outputDirectory>/</outputDirectory>
        </file>
        <file>
            <source>../server/chainlinkd/bin/chainlink</source>
            <outputDirectory>bin</outputDirectory>
            <fileMode>754</fileMode>
        </file>
        <file>
            <source>../server/chainlinkd/bin/chainlinkd</source>
            <outputDirectory>bin</outputDirectory>
            <fileMode>754</fileMode>
        </file>
        <file>
            <source>../server/chainlinkd/cnf/chainlink.xml</source>
            <outputDirectory>cnf</outputDirectory>
            <fileMode>664</fileMode>
        </file>
        <file>
            <source>install-pom.xml</source>
            <destName>pom.xml</destName>
            <outputDirectory>/</outputDirectory>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>vars</source>
            <outputDirectory>/</outputDirectory>
            <fileMode>644</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>../functions</source>
            <outputDirectory>/</outputDirectory>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>install</source>
            <outputDirectory>/</outputDirectory>
            <fileMode>754</fileMode>
        </file>
    </files>
</assembly>
